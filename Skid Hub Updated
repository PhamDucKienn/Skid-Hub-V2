-- Load OrionLib
local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/jensonhirst/Orion/main/source')))()

local Window = OrionLib:MakeWindow({
    Name = "Skid Hub V2(Beta)⚡",
    HidePremium = false,
    IntroText = "Skid Hub⚡",
    SaveConfig = true,
    ConfigFolder = "OrionTest"
})

-- Global settings
_G.AutoTap = false
_G.HighSpeed = false
_G.HighJump = false
_G.HighlightPlayers = false
_G.Fullbright = false
_G.NoFog = false

-- Functions
local function highjump()
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoid = character:WaitForChild("Humanoid")
    while _G.HighJump do
        humanoid.JumpPower = 200
        wait(1)
    end
    humanoid.JumpPower = 50 -- Reset to default
end

local function highspeed()
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoid = character:WaitForChild("Humanoid")
    while _G.HighSpeed do
        humanoid.WalkSpeed = 100
        wait(1)
    end
    humanoid.WalkSpeed = 16 -- Reset to default
end

local function highlightPlayers()
    local Players = game:GetService("Players")
    local highlightTemplate = Instance.new("Highlight")
    highlightTemplate.Name = "Highlight"
    highlightTemplate.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop

    local function addHighlight(player)
        if player.Character then
            local character = player.Character
            if not character:FindFirstChild("Highlight") then
                local highlight = highlightTemplate:Clone()
                highlight.Adornee = character
                highlight.Parent = character
            end
        end

        player.CharacterAdded:Connect(function(character)
            if not character:FindFirstChild("Highlight") then
                local highlight = highlightTemplate:Clone()
                highlight.Adornee = character
                highlight.Parent = character
            end
        end)
    end

    for _, player in pairs(Players:GetPlayers()) do
        if player ~= Players.LocalPlayer then
            addHighlight(player)
        end
    end

    Players.PlayerAdded:Connect(function(player)
        if player ~= Players.LocalPlayer then
            addHighlight(player)
        end
    end)

    while _G.HighlightPlayers do
        wait(1)
    end

    for _, player in pairs(Players:GetPlayers()) do
        if player ~= Players.LocalPlayer and player.Character and player.Character:FindFirstChild("Highlight") then
            player.Character.Highlight:Destroy()
        end
    end
end

local function fullbright()
    local lighting = game:GetService("Lighting")
    local normalLightingSettings = {
        Brightness = lighting.Brightness,
        ClockTime = lighting.ClockTime,
        FogEnd = lighting.FogEnd,
        GlobalShadows = lighting.GlobalShadows,
        Ambient = lighting.Ambient
    }

    while _G.Fullbright do
        lighting.Brightness = 1
        lighting.ClockTime = 12
        lighting.FogEnd = 786543
        lighting.GlobalShadows = false
        lighting.Ambient = Color3.fromRGB(178, 178, 178)
        wait(1)
    end

    lighting.Brightness = normalLightingSettings.Brightness
    lighting.ClockTime = normalLightingSettings.ClockTime
    lighting.FogEnd = normalLightingSettings.FogEnd
    lighting.GlobalShadows = normalLightingSettings.GlobalShadows
    lighting.Ambient = normalLightingSettings.Ambient
end

local function noFog()
    local lighting = game:GetService("Lighting")
    while _G.NoFog do
        game.Lighting.FogEnd = 100000
        game.Lighting.FogStart = 0
        game.Lighting.ClockTime = 14
        game.Lighting.Brightness = 2
        game.Lighting.GlobalShadows = false
        wait(1)
    end

    game.Lighting.FogStart = 0
    game.Lighting.FogEnd = 786543 -- Reset to default or a reasonable value
end

-- GUI Setup
local FarmTab = Window:MakeTab({
    Name = "Main",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

local SettingTab = Window:MakeTab({
    Name = "Settings",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

local InfoTab = Window:MakeTab({
    Name = "Info",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

local highSpeedTask, highJumpTask, highlightPlayersTask, fullbrightTask, noFogTask

FarmTab:AddToggle({
    Name = "High Speed",
    Default = false,
    Callback = function(Value)
        _G.HighSpeed = Value
        if Value then
            highSpeedTask = coroutine.wrap(highspeed)()
        else
            if highSpeedTask then
                highSpeedTask = nil
            end
        end
    end
})

FarmTab:AddToggle({
    Name = "High Jump",
    Default = false,
    Callback = function(Value)
        _G.HighJump = Value
        if Value then
            highJumpTask = coroutine.wrap(highjump)()
        else
            if highJumpTask then
                highJumpTask = nil
            end
        end
    end
})

FarmTab:AddToggle({
    Name = "Highlight Players",
    Default = false,
    Callback = function(Value)
        _G.HighlightPlayers = Value
        if Value then
            highlightPlayersTask = coroutine.wrap(highlightPlayers)()
        else
            if highlightPlayersTask then
                highlightPlayersTask = nil
            end
        end
    end
})

InfoTab:AddParagraph("Made By Kien3458", "Thanks For Using!")

SettingTab:AddToggle({
    Name = "Fullbright",
    Default = false,
    Callback = function(Value)
        _G.Fullbright = Value
        if Value then
            fullbrightTask = coroutine.wrap(fullbright)()
        else
            if fullbrightTask then
                fullbrightTask = nil
            end
        end
    end
})

SettingTab:AddToggle({
    Name = "No Fog",
    Default = false,
    Callback = function(Value)
        _G.NoFog = Value
        if Value then
            noFogTask = coroutine.wrap(noFog)()
        else
            if noFogTask then
                noFogTask = nil
            end
        end
    end
})
